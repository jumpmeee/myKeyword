<!DOCTYPE HTML>
<!--
	Stellar by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->

<html>

<head>
	<title>나의 키워드 - 결과분석</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="/assets/css/main.css" />
	<noscript>
		<link rel="stylesheet" href="/assets/css/noscript.css" /></noscript>

</head>

<body class="is-preload">

	<!-- Wrapper -->
	<div id="wrapper">

		<!-- Header -->
		<header id="header">
			<h1>
				<%= Email %> 님의 결과분석</h1>
			<p>나의 <b>Top 3</b> 키워드와 매칭률을 보여줍니다.</p>
		</header>

		<!-- Main -->
		<div id="main">

			<!-- Content -->
			<section id="content" class="main">
				<!-- Top3 -->
				<section id="Top3" class="main special">
					<header class="major">
						<h2>Top 3</h2>
					</header>
					<h1>
						<%= data.keyWords[0].keyWord %>,
						<%= data.keyWords[1].keyWord %>,
						<%= data.keyWords[2].keyWord %>
					</h1>

					<div>
						<input value="+" onclick="if(this.parentNode.getElementsByTagName('div')[0].style.display != ''){
													this.parentNode.getElementsByTagName('div')[0].style.display = '';
													this.value = '-';}
													else{
														this.parentNode.getElementsByTagName('div')[0].style.display = 'none'; 
														this.value = '+';
														}"
						 type="button" />
						<div style="display: none;">
							<section>
								<br>
								<h2>상세정보</h2>
								<h3>체크된 키워드</h3>
								<div class="table-wrapper">
									<table>
										<thead>
											<tr>
												<th>No</th>
												<th>Keyword</th>
												<th>Clicks</th>
											</tr>
										</thead>
										<tbody>
											<% let sum = 0; let j = 1; for(let i in data.keyWords) {  %>
											<tr>
												<td>
													<%= j++ %>
												</td>
												<td>
													<%= data.keyWords[i].keyWord %>
												</td>
												<td>
													<%= data.keyWords[i].cnt %>
												</td>
											</tr>
											<% sum += data.keyWords[i].cnt}; %>
										</tbody>
										<tfoot>
											<tr>
												<td colspan="2"></td>
												<td>
													<%= sum %>
												</td>
											</tr>
										</tfoot>
									</table>
								</div>
							</section>
						</div>
					</div>
				</section>

				<hr />

				<section id="matchingPoint" class="main special">
					<header class="major">
						<h2>Matching point</h2>
						<!-- matchpoint가 100.00(string타입)인 상황에선 밑에 상세보기 생략해야할듯  -->
					</header>
					<h1><b>
							<%= data.matchPoint %> % </b></h1>

					<div>
						<input value="+" onclick="if(this.parentNode.getElementsByTagName('div')[0].style.display != ''){
													this.parentNode.getElementsByTagName('div')[0].style.display = '';
													this.value = '-';}else{this.parentNode.getElementsByTagName('div')[0].style.display = 'none'; 
													this.value = '+';}"
						 type="button" />
						<div style="display: none;">
							<section>
								<br>
								<h2>상세정보</h2>
								<h3>나는 선택했지만 타인은 선택하지 않은 키워드</h3>
								<!--MoOx-->
								<div class="table-wrapper">
									<table class="alt">
										<thead>
											<tr>
												<th>No</th>
												<th>Keyword</th>
											</tr>
										</thead>
										<tbody>
											<% j = 1; for(let i in data.matchMoOx) {  %>
											<tr>
												<td>
													<%= j++ %>
												</td>
												<td>
													<%= data.matchMoOx[i].keyWord %>
												</td>
											</tr>
											<% } %>
										</tbody>
									</table>
								</div>

								<h3>나는 선택하지 않았지만 타인이 선택한 키워드</h3>
								<!--MxOo-->
								<div class="table-wrapper">
									<table>
										<thead>
											<tr>
												<th>No</th>
												<th>Keyword</th>
												<th>Clicks</th>
											</tr>
										</thead>
										<tbody>
											<% sum = 0; j = 1; for(let i in data.matchMxOo) {  %>
											<tr>
												<td>
													<%= j++ %>
												</td>
												<td>
													<%= data.matchMxOo[i].keyWord %>
												</td>
												<td>
													<%= data.matchMxOo[i].cnt %>
												</td>
											</tr>
											<% sum += data.matchMxOo[i].cnt}; %>
										</tbody>
										<!-- <tfoot>
											<tr>
												<td colspan="2"></td>
												<td>
													<%= sum %>
												</td>
											</tr>
										</tfoot> -->
									</table>
								</div>
							</section>
						</div>
					</div>
				</section>
				<h1 id="matchnothing"></h1>
				<% 
					if(!data.matchMoOx) {
						console.log("matchMoOx " + data.matchMoOx);
				%>
				<script>
					// alert(document.getElementById("matchingPoint"))
					document.getElementById("matchingPoint").style.display = "none";
					document.getElementById("matchnothing").innerHTML = "체크한 친구가 없습니다!";
				</script>
				<%
					}
				%>

				<hr />

				<footer class="major">
					<h4><b>링크공유하기 : <%= data.link %></b></h4> <!-- 클립보드로 복사하기 만들기 -->
					<ul class="actions special">
						<li><a href="/" class="button">홈으로</a></li>
					</ul>
				</footer>
			</section>

		</div>

		<!-- Footer -->
		<% include ./footer %>
	</div>

	<!-- Scripts -->
	<script src="/assets/js/jquery.min.js"></script>
	<script src="/assets/js/jquery.scrollex.min.js"></script>
	<script src="/assets/js/jquery.scrolly.min.js"></script>
	<script src="/assets/js/browser.min.js"></script>
	<script src="/assets/js/breakpoints.min.js"></script>
	<script src="/assets/js/util.js"></script>
	<script src="/assets/js/main.js"></script>

</body>

</html>